liveChinaApp.controller("search",["$scope","$http","API_URL_ROOT",function(t,o,e){t.historyArr=null,t.showHistory=0,t.toCancel=function(){t.showHistory=0},t.clearHistory=function(){window.localStorage.searchHistory="",t.showHistory=0},t.choice=function(o){t.text=o.target.innerText,t.toAjax(t.text),t.showHistory=0,t.search=!1},t.keyUp=function(o){console.log(t.historyArr),t.temp=window.localStorage.searchHistory.slice(window.localStorage.searchHistory.indexOf(",")+1),t.historyArr=t.temp.split(",").reverse(),null!=t.text&&void 0!=t.text&&""!=t.text&&t.text.length>0?(t.search=!0,t.showHistory=1):t.search=!1},t.searching=function(){t.search&&(window.localStorage.searchHistory+=","+t.text,t.temp=window.localStorage.searchHistory.slice(window.localStorage.searchHistory.indexOf(",")+1),t.historyArr=t.temp.split(",").reverse()),t.historyArr.length>10&&(t.historyArr.length=10),t.showHistory=0,t.toAjax(t.text)},t.goBack=function(){history.back()},t.toAjax=function(e){o({method:"JSONP",url:"http://operate.tw.live.hoge.cn/index.php?callback=JSON_CALLBACK&m=Apituwenol&c=tuwenol&a=show&custom_appkey=A3O8gmwJURFi8d74nuKxRpczjoAydHSE&custom_appid=137&title="+e}).then(function(o){t.text="",t.search=!1,t.result=o},function(t){})}}]);